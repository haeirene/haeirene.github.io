"use strict";var centerWidth,centerHeight,currentCelestialObjectId,currentCelestialObject,sun,mercury,venus,moon,mars,jupiter,saturn,uranus,neptune,pluto,bg,cPalette,cWhite100,cBlack255,prevX=0,prevY=0,prevXBackward=0,prevYBackward=0,drawCount=0,orbitCount=1,isRefreshed=0,thresholdOrbit=8,isPaused=!1,isBackwardDrawn=!1,currentPos=thresholdOrbit,lastPos=0,isForward=!0,numCelestialObjects=0,celestialObjects=[],listOrbits={};function preload(){bg=loadImage("../data/events/images/bg.png")}var currentTimestamp="1950-January",currentY=0,currentM=0;function setup(){centerWidth=windowWidth/2,centerHeight=windowHeight/2,createCanvas(windowWidth,windowHeight),cWhite100=color(255,255,255),cBlack255=color(29,26,27),mercury=new Body(199,"mercury","01_mercury.txt",51,10070,1e6),venus=new Body(299,"venus","02_venus.txt",51,10070,1e6),moon=new Body(301,"moon","03_moon.txt",52,70181,1500),mars=new Body(499,"mars","04_mars.txt",55,10072,1e6),jupiter=new Body(599,"jupiter","05_jupiter.txt",54,10071,5e6),saturn=new Body(699,"saturn","06_saturn.txt",52,10071,5e6),uranus=new Body(799,"uranus","07_uranus.txt",52,10071,1e7),neptune=new Body(899,"neptune","08_neptune.txt",54,10071,2e7),pluto=new Body(999,"pluto","09_pluto.txt",50,10068,2e7),celestialObjects.push(mercury),celestialObjects.push(venus),celestialObjects.push(moon),celestialObjects.push(mars),celestialObjects.push(jupiter),celestialObjects.push(saturn),celestialObjects.push(uranus),celestialObjects.push(neptune),celestialObjects.push(pluto),numCelestialObjects=celestialObjects.length-1,currentCelestialObject=celestialObjects[currentCelestialObjectId=0],resetDesign()}function draw(){if(0!=thresholdOrbit&&0!=listOrbits.length){if(isForward)drawCount<thresholdOrbit?drawOrbitForward(drawCount,cWhite100):isPaused=!0;else if(thresholdOrbit<drawCount&&(drawOrbitForward(drawCount,cBlack255),!isBackwardDrawn))for(var e=0;e<thresholdOrbit;e++)drawOrbitForward(e,cWhite100);isBackwardDrawn=!0}else currentCelestialObject.getOrbitData(),listOrbits=currentCelestialObject.getOrbits(),getCurrentTimestamp();!isPaused&&isForward?drawCount++:isPaused||isForward||thresholdOrbit<drawCount&&drawCount--}function drawOrbitForward(e,t){var r,s,a,i=currentCelestialObject.divideBy,c=listOrbits[e].xyz.x/i+centerWidth,n=listOrbits[e].xyz.y/i+centerHeight;a=isForward?(r=prevX,s=prevY,1.5):isForward||t!==cBlack255?(r=prevXBackward,s=prevYBackward,1.5):(r=prevX,s=prevY,3),console.log(e),console.log(c),console.log(n),console.log(r),console.log(s),0!=r&&(stroke(t),strokeWeight(a),line(r,s,c,n)),isForward?(prevX=c,prevY=n):isForward||t!==cBlack255?(prevXBackward=c,prevYBackward=n):(prevX=c,prevY=n)}function mouseClicked(e){if(e.target){var t=e.explicitOriginalTarget,r=t.parentElement;switch(t.className){case"mercury":currentCelestialObjectId=0;break;case"venus":currentCelestialObjectId=1;break;case"moon":currentCelestialObjectId=2;break;case"mars":currentCelestialObjectId=3;break;case"jupiter":currentCelestialObjectId=4;break;case"saturn":currentCelestialObjectId=5;break;case"uranus":currentCelestialObjectId=6;break;case"neptune":currentCelestialObjectId=7;break;case"pluto":currentCelestialObjectId=8}currentCelestialObject=celestialObjects[currentCelestialObjectId];var s=document.querySelector(".celestial_body---selected");s&&s.classList.remove("celestial_body---selected"),r.classList.add("celestial_body---selected"),resetDesign()}}function resetDesign(){drawCount=0,centerWidth=windowWidth/2,centerHeight=windowHeight/2,prevYBackward=prevXBackward=prevY=prevX=orbitCount=0,fill(0,177,255),noStroke(),circle(centerWidth,centerHeight,25),currentCelestialObject.getOrbitData(),listOrbits=currentCelestialObject.getOrbits()}function windowResized(){resizeCanvas(windowWidth,windowHeight),isRefreshed=0===isRefreshed?(resetDesign(),255):((currentCelestialObject=currentCelestialObject).getOrbitData(),listOrbits=currentCelestialObject.getOrbits(),0)}function mouseWheel(){getCurrentTimestamp()}function getCurrentTimestamp(){var e=document.querySelector(".timeline___month---current").getAttribute("id").split("-"),t=parseInt(e[2]);thresholdOrbit="moon"===currentCelestialObject.name?30*t:8*t,currentPos<thresholdOrbit?isForward=!0:currentPos===thresholdOrbit?isForward=isForward:isBackwardDrawn=isForward=!1,isPaused=!1,currentPos=thresholdOrbit,prevYBackward=prevXBackward=0}